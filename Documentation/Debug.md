# Debugging in Plang

Debugging is an essential part of the development process, allowing you to identify and fix issues in your code. This guide will walk you through the debugging tools available for Plang, including using the IDE debugger, logger, and traditional write-out methods. Additionally, we'll cover how to debug C# code generated by Plang.

## IDE Debugger

To effectively debug your Plang code, you need to set up Visual Studio Code (VS Code) with the Plang extension. Follow the setup instructions in the [IDE Setup Guide](./IDE.md).

### Important Notes
- **Performance Warning**: Running your code in debug mode can make it run approximately 10 times slower.
- **Starting Debugging**: 
  - Press `F5` on your keyboard.
  - Alternatively, select `Run -> Start Debugging` from the VS Code menu.
- **Breakpoints**: You can add breakpoints in your code within VS Code to pause execution and inspect variables.
- **Stepping Through Code**: Use `F10` to step through each line of your code.

### Running Debug Mode from Terminal
You can also initiate debug mode directly from the terminal by adding the `--debug` flag to your command:
```bash
plang exec --debug
```

## Logger

Using a logger can be extremely helpful when debugging. You can adjust the logger level in several ways:

### Starting with a Specific Log Level
You can start your application with a specific log level using the terminal:
```bash
plang --logger=trace
```

### Setting Log Level in the Goal
Specify the log level in the comment of the goal using tags like `[trace]`, `[debug]`, `[info]`, `[warning]`, `[error]`:
```plang
/ This is the start [trace]
Start
- write out 'hello', logger=trace
```

### Defining Log Level on a Step
You can also set the log level for individual steps:
```plang
Start
- read file.txt into %content%, set log level: trace
```

## Write Out

The traditional method of writing out variables for debugging is still valid and useful:
```plang
Start
- write out %!Goal%
```
This will display the contents of the `%!Goal%` object, helping you understand the current state of your variables.

## C# Debugging

Plang allows you to debug C# code generated from your Plang scripts. Here's how you can do it:

### Requirements
- Download the [Plang project](https://github.com/PLangHQ/plang/).
- Install Visual Studio, which is free for community use: [Visual Studio Community](https://visualstudio.microsoft.com/vs/community/).

### Debugging C# Code
- Add the `--csdebug` flag to your terminal command to enable C# debugging.
- You can choose to debug either the generated C# code or the original Plang source code.

### Extracting C# Code
To debug the generated C# code:
1. Enter debug mode and press `Ctrl+Alt+U`, or select `Debug -> Windows -> Modules` from the menu.
2. Search for the module name, which should be in the format `01. NameOfModule.dll`.
3. Right-click the module and select "Extract code".

### How the Debugger Works
When you add the `--debug` parameter, an `Events` folder will appear. This folder binds to run before each step in the goal files to call `!SendDebug.goal`. The `SendDebug` goal sends a POST request to `http://localhost:60877/`. This server is started as soon as you start VS Code, and the VS Code Plang extension receives the data and displays it in the editor.

By following these instructions, you can effectively debug your Plang applications and ensure they run smoothly.